<!DOCTYPE html>
<html lang="en">
<head>
    <title>Speech to text</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='style.css') }}"/>
</head>
<body>
    <div class="wrapper">
        <div class="header"><h1>Speech to text</h1></div>
        <div class="design">
            <audio controls>
            </audio>
        </div>
        <div class="transcript"></div>
    </div>
    <script>
    const handleSuccess = function(stream) {
        const context = new AudioContext();
        const source = context.createMediaStreamSource(stream);
        const processor = context.createScriptProcessor(1024, 1, 1);

        source.connect(processor);
        processor.connect(context.destination);

        processor.onaudioprocess = function(e) {
          // Do something with the data, e.g. convert it to WAV
          console.log(e.inputBuffer);
        };
      };

    navigator.mediaDevices.getUserMedia({ audio: true, video: false })
      .then(handleSuccess);
    </script>
</body>
</html>
